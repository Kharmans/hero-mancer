<div class='tab {{tabs.abilities.cssClass}}' data-tab='abilities' data-group='hero-mancer-tabs'>
  <fieldset>
    <legend>{{localize 'hm.app.abilities.tooltip'}}</legend>
    {{#if (hm-eq diceRollMethod 'pointBuy')}}
      {{! Render point buy interface }}
      <p>{{localize 'hm.app.abilities.instructions.point-buy'}}</p>
      <div class='ability-container'>
        <!-- Point buy-specific elements go here -->
      </div>

    {{else if (hm-eq diceRollMethod 'standardArray')}}
      {{! Render standard array interface }}
      <p>{{localize 'hm.app.abilities.instructions.standard-array'}}</p>
      <div class='ability-container'>
        {{#each abilities}}
          <div id='ability-block-{{@index}}' class='ability-block'>
            <!-- Ability name label -->
            <span class='ability-label' aria-label='{{localize "hm.app.abilities.label"}}'>
              {{this.abbreviation}}
            </span>

            <!-- Dropdown for selecting standard array values -->
            <select
              id='ability-{{@index}}-dropdown'
              name='abilities[{{this.key}}]'
              class='ability-dropdown'
              data-dtype='Number'
              aria-label='{{localize "hm.app.abilities.select-value"}}'
            >
              <option value=''>{{localize 'hm.app.abilities.select-placeholder'}}</option>
              {{#each ../standardArray}}
                <option value='{{this}}'>{{this}}</option>
              {{/each}}
            </select>
          </div>
        {{/each}}
      </div>

    {{else}}
      {{! Render manual formula interface (default) }}
      <p>{{localize 'hm.app.abilities.instructions.manual'}}</p>
      <div class='ability-container'>
        <!-- Manual rolling-specific elements go here -->
        {{#each abilities}}
          <div id='ability-block-{{@index}}' class='ability-block'>
            <label for='ability-{{@index}}-score'>{{localize 'hm.app.abilities.score-label'}}</label>
            <select
              id='ability-{{@index}}-dropdown'
              name='abilities[{{this.key}}]'
              class='ability-dropdown'
              data-dtype='String'
              aria-label='{{localize "hm.app.abilities.select-label"}}'
            >
              <option value=''>{{localize 'hm.app.abilities.select-placeholder'}}</option>
              {{#each abilities}}
                <option value='{{this.key}}'>{{this.abbreviation}}</option>
              {{/each}}
            </select>

            <!-- Label for the score input -->
            <input
              id='ability-{{@index}}-score'
              type='number'
              name='abilities[{{this.key}}].score'
              class='ability-score'
              data-dtype='Number'
              placeholder='{{localize "hm.app.abilities.score-placeholder"}}'
              aria-label='{{localize "hm.app.abilities.score-label"}}'
            />

            <!-- Dice icon with button role for rolling the stat -->
            <i
              class='fa-solid fa-dice-d6 fa-2xl'
              style='cursor: pointer'
              data-action='rollStat'
              data-index='{{@index}}'
              role='button'
              aria-label='{{localize "hm.app.abilities.roll-dice"}}'
              tabindex='0'
            ></i>
          </div>
        {{/each}}
      </div>
    {{/if}}
  </fieldset>
</div>